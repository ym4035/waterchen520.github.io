<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>babel + Vue CLI脚手架 | Violet`Blog</title><meta name="keywords" content="VUE,vue,Vue,vue3,前端,学习,babel"><meta name="author" content="Violet,2268025923@qq.com"><meta name="copyright" content="Violet"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="babel的使用，Vue CLI脚手架知识汇总"><meta property="og:type" content="article"><meta property="og:title" content="babel + Vue CLI脚手架"><meta property="og:url" content="https://qwq3.top/posts/8f22.html"><meta property="og:site_name" content="Violet&#96;Blog"><meta property="og:description" content="babel的使用，Vue CLI脚手架知识汇总"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251519896.jpg"><meta property="article:published_time" content="2021-09-29T09:15:32.000Z"><meta property="article:modified_time" content="2021-11-18T04:02:22.746Z"><meta property="article:author" content="Violet"><meta property="article:tag" content="Vue3"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251519896.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://qwq3.top/posts/8f22"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hexo-circle-of-friends-api-gray-eight.vercel.app"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="wQg9NEaZT7S17k67-8yTQ6t8Cl80Ox2_3_fhRsrILek"><meta name="msvalidate.01" content="6B596F49E73BA7596BE416B718D67F76"><meta name="baidu-site-verification" content="code-oLxYlsQOY7"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#49b1f5"><link rel="apple-touch-icon" sizes="180x180" href="/images/pwaicons/128.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/pwaicons/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/pwaicons/16.png"><link rel="mask-icon" href="/images/pwaicons/128.png" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/waterchen520/asset@1.0/animate.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:230},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"mediumZoom",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"top-right"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-11-18 04:02:22"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const n=saveToLocal.get("global-font-size");void 0!==n&&document.documentElement.style.setProperty("--global-font-size",n+"px")})(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><meta name="google-site-verification" content="O3IfnYL5-UZO2tb5j7cvrQyGIQs5L48Iyv-QmAnGjFQ"><link rel="stylesheet" href="/css/badge.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2508400_xe8j12uijki.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Violet`Blog" type="application/atom+xml"></head><body><a href="javascript:void(0);" rel="external nofollow noreferrer" onclick="preloader.endLoading()" title="施展咒语跳过动画！"><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><img class="load-image" src="https://cdn.jsdelivr.net/gh/WaterChen520/vuecdn/img/vue120210423234612.gif" alt=""></div></a><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/waterchen520/cdn@5.0/qiqi/img/23.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw fas fa-archive faa-tada"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/music/"><i class="fa-fw fas fa-music faa-tada"></i> <span>音乐馆</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/special/"><i class="fa-fw fas fa-rocket faa-tada"></i> <span>特效</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/fcircle/"><i class="fa-fw fab fa-artstation faa-tada"></i> <span>朋友圈</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw fas fa-envelope faa-tada"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw fas fa-link faa-tada"></i> <span>友人帐</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/hpptalk/"><i class="fa-fw fas fa-comment-dots faa-tada"></i> <span>闲言碎语</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg> <span>追番</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg> <span>关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251519896.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Violet`Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw fas fa-home faa-tada"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw fas fa-archive faa-tada"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/music/"><i class="fa-fw fas fa-music faa-tada"></i> <span>音乐馆</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/special/"><i class="fa-fw fas fa-rocket faa-tada"></i> <span>特效</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/fcircle/"><i class="fa-fw fab fa-artstation faa-tada"></i> <span>朋友圈</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw fas fa-envelope faa-tada"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw fas fa-link faa-tada"></i> <span>友人帐</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/hpptalk/"><i class="fa-fw fas fa-comment-dots faa-tada"></i> <span>闲言碎语</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg> <span>追番</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg> <span>关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">babel + Vue CLI脚手架</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-09-29T09:15:32.000Z" title="发表于 2021-09-29 09:15:32">2021-09-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-18T04:02:22.746Z" title="更新于 2021-11-18 04:02:22">2021-11-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>17分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="babel + Vue CLI脚手架"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/8f22.html#post-comment"><span id="twikoo-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="为什么需要-babel？"><a href="#为什么需要-babel？" class="headerlink" title="为什么需要 babel？"></a>为什么需要 babel？</h3><blockquote><p>事实上，在开发中我们很少直接去接触 babel，但是<strong>babel 对于前端开发</strong>来说，目前是<strong>不可缺少的一部分</strong>：</p></blockquote><p>开发中，我们想要使用 ES6+的语法，想要使用 TypeScript，开发 React 项目，它们都是离不开 Babel 的；</p><p>所以，学习 Babel 对于我们理解代码从编写到线上的转变过程至关重要；</p><blockquote><p><strong>那么，Babel 到底是什么呢？</strong></p></blockquote><p>Babel 是一个工具链，主要用于旧浏览器或者环境中将 ECMAScript 2015+代码转换为向后兼容版本的 JavaScript；</p><p>包括：语法转换、源代码转换等；</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251520731.png" alt="image-20210925152002988"></p><h3 id="Babel-命令行使用"><a href="#Babel-命令行使用" class="headerlink" title="Babel 命令行使用"></a>Babel 命令行使用</h3><blockquote><p>babel 本身可以作为<strong>一个独立的工具</strong>（和 postcss 一样），不和 webpack 等构建工具配置来单独使用。</p></blockquote><p>如果我们希望在命令行尝试使用 babel，需要安装如下库：</p><ul><li><code>@babel/core：</code>babel 的核心代码，必须安装；</li><li><code>@babel/cli：</code>可以让我们在命令行使用 babel；</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/cli @babel/core -D</span><br></pre></td></tr></table></figure><p>使用 babel 来处理我们的源代码：</p><ul><li>src：是源文件的目录；</li><li>–out-dir：指定要输出的文件夹 dist；</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx babel src --out-dir dist</span><br></pre></td></tr></table></figure><h3 id="插件的使用"><a href="#插件的使用" class="headerlink" title="插件的使用"></a>插件的使用</h3><p>比如我们需要转换箭头函数，那么我们就可以使用<strong>箭头函数转换相关的插件</strong>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/plugin-transform-arrow-functions -D</span><br><span class="line">npx babel src --out-dir dist --plugins=@babel/plugin-transform-arrow-functions</span><br></pre></td></tr></table></figure><blockquote><p>查看转换后的结果：我们会发现 const 并没有转成 var</p></blockquote><p>这是因为 <code>plugin-transform-arrow-functions</code>，并没有提供这样的功能；</p><p>我们需要使用 <code>plugin-transform-block-scoping</code> 来完成这样的功能；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/plugin-transform-block-scoping -D</span><br><span class="line">npx babel src --out-dir dist --plugins=@babel/plugin-transform-block-scoping,@babel/plugin-transform-arrow-functions</span><br></pre></td></tr></table></figure><h3 id="Babel-的预设-preset"><a href="#Babel-的预设-preset" class="headerlink" title="Babel 的预设 preset"></a>Babel 的预设 preset</h3><blockquote><p>但是如果要转换的内容过多，一个个设置是比较麻烦的，我们可以使用预设（preset）：</p></blockquote><p>后面我们再具体来讲预设代表的含义；</p><blockquote><p>安装@babel/preset-env 预设：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/preset-env -D</span><br></pre></td></tr></table></figure><p>执行如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx babel src --out-dir dist --presets=@babel/preset-env</span><br></pre></td></tr></table></figure><h3 id="Babel-的底层原理"><a href="#Babel-的底层原理" class="headerlink" title="Babel 的底层原理"></a>Babel 的底层原理</h3><blockquote><p>babel 是如何做到将我们的<strong>一段代码（ES6、TypeScript、React）</strong>转成<strong>另外一段代码（ES5）</strong>的呢？</p></blockquote><p>从一种<code>源代码（原生语言）</code>转换成另一种<code>源代码（目标语言）</code>，这是什么的工作呢？</p><p>就是<strong>编译器</strong>，事实上我们可以将 babel 看成就是一个编译器。</p><p>Babel 编译器的作用就是将<code>我们的源代码</code>，转换成浏览器可以直接识别的<code>另外一段源代码</code>；</p><p><strong>Babel 也拥有编译器的工作流程：</strong></p><ul><li>解析阶段（Parsing）</li><li>转换阶段（Transformation）</li><li>生成阶段（Code Generation）</li></ul><p>github 项目地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jamiebuilds/the-super-tiny-compiler">https://github.com/jamiebuilds/the-super-tiny-compiler</a></p><h3 id="Babel-编译器执行原理"><a href="#Babel-编译器执行原理" class="headerlink" title="Babel 编译器执行原理"></a>Babel 编译器执行原理</h3><p>Babel 的执行阶段</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251525116.png" alt="image-20210925152544011"></p><p>当然，这只是一个简化版的编译器工具流程，在每个阶段又会有自己具体的工作：</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251526498.png" alt="image-20210925152602665"></p><h3 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h3><p>在实际开发中，我们通常会在构建工具中通过配置 babel 来对其进行使用的，比如在 webpack 中。</p><p>那么我们就需要去安装相关的依赖：</p><ul><li><p>如果之前已经安装了@babel/core，那么这里不需要再次安装；</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-loader @babel/core</span><br></pre></td></tr></table></figure></li></ul><p>我们可以设置一个规则，在加载 js 文件时，使用我们的 babel：</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251526607.png" alt="image-20210925152654703"></p><p><strong>指定使用的插件</strong></p><p>我们必须指定使用的插件才会生效</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251527761.png" alt="image-20210925152720066"></p><h3 id="babel-preset"><a href="#babel-preset" class="headerlink" title="babel-preset"></a>babel-preset</h3><p>如果我们一个个去安装使用插件，那么需要手动来管理大量的 babel 插件，我们可以直接给 webpack 提供一个 preset，webpack 会根据我们的预设来加载对应的插件列表，并且将其传递给 babel。</p><p>比如常见的预设有三个：</p><ul><li>env</li><li>react</li><li>TypeScript</li></ul><p>安装 preset-env：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/preset-env</span><br></pre></td></tr></table></figure><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251528882.png" alt="image-20210925152821178"></p><h3 id="Babel-的配置文件"><a href="#Babel-的配置文件" class="headerlink" title="Babel 的配置文件"></a>Babel 的配置文件</h3><blockquote><p>像之前一样，我们可以将 babel 的配置信息放到一个独立的文件中，babel 给我们提供了两种配置文件的编写：</p></blockquote><p>babel.config.json（或者.js，.cjs，.mjs）文件；</p><p>.babelrc.json（或者.babelrc，.js，.cjs，.mjs）文件</p><blockquote><p>它们两个有什么区别呢？目前很多的项目都采用了多包管理的方式（babel 本身、element-plus、umi 等）；</p></blockquote><p>.babelrc.json：早期使用较多的配置方式，但是对于配置 Monorepos 项目是比较麻烦的；</p><p>babel.config.json（babel7）：可以直接作用于 Monorepos 项目的子包，更加推荐；</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251529483.png" alt="image-20210925152916649"></p><h3 id="Vue-源码的打包"><a href="#Vue-源码的打包" class="headerlink" title="Vue 源码的打包"></a>Vue 源码的打包</h3><p>我们主要是学习 Vue 的，那么我们应该包含 Vue 相关的代码：</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251529766.png" alt="image-20210925152950069"></p><p>界面上是没有效果的：并且我们查看运行的控制台，会发现如下的警告信息；</p><p><img src="/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251530744.png" alt="image-20210925153005773"></p><p><strong>Vue 打包后不同版本解析</strong></p><blockquote><p><strong>vue(.runtime).global(.prod).js：</strong></p></blockquote><p>通过浏览器中的<script src="...">直接使用；</p>
<p>我们之前通过 CDN 引入和下载的 Vue 版本就是这个版本；</p>
<p>会暴露一个全局的 Vue 来使用；</p>
<blockquote>
<p><strong>vue(.runtime).esm-browser(.prod).js：</strong></p>
</blockquote>
<p>用于通过原生 ES 模块导入使用 (在浏览器中通过 <script type="module"> 来使用)。</p>
<blockquote>
<p><strong>vue(.runtime).esm-bundler.js：</strong></p>
</blockquote>
<p>用于 webpack，rollup 和 parcel 等构建工具；</p>
<p>构建工具中默认是 vue.runtime.esm-bundler.js；</p>
<p>如果我们需要解析模板 template，那么需要手动指定 vue.esm-bundler.js；</p>
<blockquote>
<p><strong>vue.cjs(.prod).js：</strong></p>
</blockquote>
<p>服务器端渲染使用；</p>
<p>通过 require()在 Node.js 中使用；</p>
<h3 id="运行时-编译器-vs-仅运行时"><a href="#运行时-编译器-vs-仅运行时" class="headerlink" title="运行时+编译器 vs 仅运行时"></a>运行时+编译器 vs 仅运行时</h3><blockquote>
<p>在 Vue 的开发过程中我们有<strong>三种方式</strong>来编写 DOM 元素：</p>
</blockquote>
<p>方式一：<code>template模板</code>的方式（之前经常使用的方式）；</p>
<p>方式二：<code>render函数</code>的方式，使用 h 函数来编写渲染的内容；</p>
<p>方式三：通过<code>.vue文件</code>中的 template 来编写模板；</p>
<blockquote>
<p><strong>它们的模板分别是如何处理的呢？</strong></p>
</blockquote>
<p>方式二中的 h 函数可以直接返回一个<strong>虚拟节点</strong>，也就是<strong>Vnode 节点</strong>；</p>
<p>方式一和方式三的 template 都需要有<code>特定的代码</code>来对其进行解析：</p>
<p>方式三.vue 文件中的 template 可以通过在<code>vue-loader</code>对其进行编译和处理；</p>
<p>方式一中的 template 我们必须要<code>通过源码中一部分代码</code>来进行编译；</p>
<blockquote>
<p>所以，Vue 在让我们选择版本的时候分为 <strong>运行时+编译器</strong> vs <strong>仅运行时</strong></p>
</blockquote>
<p><code>运行时+编译器</code>包含了对 template 模板的编译代码，更加完整，但是也更大一些；</p>
<p><code>仅运行时</code>没有包含对 template 版本的编译代码，相对更小一些；</p>
<h3 id="全局标识的配置"><a href="#全局标识的配置" class="headerlink" title="全局标识的配置"></a>全局标识的配置</h3><p>我们会发现控制台还有另外的一个警告：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251533556.png" alt="image-20210925153324781"></p>
<p>在 GitHub 上的文档中我们可以找到说明：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251533344.png" alt="image-20210925153335701"></p>
<p>这是两个特性的标识，一个是使用 Vue 的 Options，一个是 Production 模式下是否支持 devtools 工具；</p>
<p>虽然他们都有默认值，但是强烈建议我们手动对他们进行配置；</p>
<h3 id="VSCode-对-SFC-文件的支持"><a href="#VSCode-对-SFC-文件的支持" class="headerlink" title="VSCode 对 SFC 文件的支持"></a>VSCode 对 SFC 文件的支持</h3><p>在前面我们提到过，真实开发中多数情况下我们都是使用 SFC（ <strong>single-file components (单文件组件)</strong> ）。</p>
<blockquote>
<p>我们先说一下 VSCode 对 SFC 的支持：</p>
</blockquote>
<p>插件一：Vetur，从 Vue2 开发就一直在使用的 VSCode 支持 Vue 的插件；</p>
<p>插件二：Volar，官方推荐的插件（后续会基于 Volar 开发官方的 VSCode 插件）；</p>
<h3 id="App-vue-的打包过程"><a href="#App-vue-的打包过程" class="headerlink" title="App.vue 的打包过程"></a>App.vue 的打包过程</h3><p>我们对代码打包会报错：我们需要合适的 Loader 来处理文件</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251536871.png" alt="image-20210925153648536"></p>
<p>这个时候我们需要使用 vue-loader：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-loader -D</span><br></pre></td></tr></table></figure>

<p>在 webpack 的模板规则中进行配置：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251536894.png" alt="image-20210925153640068"></p>
<h3 id="vue-compiler-sfc"><a href="#vue-compiler-sfc" class="headerlink" title="@vue/compiler-sfc"></a>@vue/compiler-sfc</h3><p>打包依然会报错，这是因为我们必须添加@vue/compiler-sfc 来对 template 进行解析：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vue/compiler-sfc -D</span><br></pre></td></tr></table></figure>

<p>另外我们需要配置对应的 Vue 插件：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251537842.png" alt="image-20210925153730977"></p>
<p>重新打包即可支持 App.vue 的写法</p>
<p>另外，我们也可以编写其他的.vue 文件来编写自己的组件；</p>
<h3 id="为什么要搭建本地服务器？"><a href="#为什么要搭建本地服务器？" class="headerlink" title="为什么要搭建本地服务器？"></a>为什么要搭建本地服务器？</h3><blockquote>
<p>目前我们开发的代码，为了运行需要有两个操作：</p>
</blockquote>
<p>操作一：npm run build，编译相关的代码；</p>
<p>操作二：通过 live server 或者直接通过浏览器，打开 index.html 代码，查看效果；</p>
<p>这个过程经常操作会影响我们的开发效率，我们希望可以做到，当文件发生变化时，可以自动的完成 编译 和 展示；</p>
<p>为了完成自动编译，webpack 提供了几种可选的方式：</p>
<ul>
<li>webpack watch mode；</li>
<li>webpack-dev-server（常用）；</li>
<li>webpack-dev-middleware；</li>
</ul>
<h3 id="Webpack-watch"><a href="#Webpack-watch" class="headerlink" title="Webpack watch"></a>Webpack watch</h3><blockquote>
<p>webpack 给我们提供了 watch 模式：</p>
</blockquote>
<p>在该模式下，webpack 依赖图中的所有文件，只要有一个发生了更新，那么代码将被重新编译；</p>
<p>我们不需要手动去运行 npm run build 指令了；</p>
<blockquote>
<p>如何开启 watch 呢？两种方式：</p>
</blockquote>
<p>方式一：在导出的配置中，添加 watch: true；</p>
<p>方式二：在启动 webpack 的命令中，添加 –watch 的标识；</p>
<p>这里我们选择方式二，在 package.json 的 scripts 中添加一个 watch 的脚本：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251539043.png" alt="image-20210925153907405"></p>
<h3 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h3><blockquote>
<p>上面的方式可以监听到文件的变化，但是事实上它本身是没有自动刷新浏览器的功能的：</p>
</blockquote>
<p>当然，目前我们可以在 VSCode 中使用 live-server 来完成这样的功能；</p>
<p>但是，我们希望在不适用 live-server 的情况下，可以具备 live reloading（实时重新加载）的功能；</p>
<blockquote>
<p>安装 webpack-dev-server</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server -D</span><br></pre></td></tr></table></figure>

<p>修改配置文件，告知 dev server，从什么位置查找文件：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251539570.png" alt="image-20210925153956893"></p>
<p>webpack-dev-server 在编译之后不会写入到任何输出文件。而是将 bundle 文件保留在内存中：</p>
<p>事实上 webpack-dev-server 使用了一个库叫 memfs（memory-fs webpack 自己写的）</p>
<h3 id="认识模块热替换（HMR）"><a href="#认识模块热替换（HMR）" class="headerlink" title="认识模块热替换（HMR）"></a>认识模块热替换（HMR）</h3><blockquote>
<p>什么是 HMR 呢？</p>
</blockquote>
<ul>
<li>HMR 的全称是 Hot Module Replacement，翻译为模块热替换；</li>
<li>模块热替换是指在 应用程序运行过程中，替换、添加、删除模块，而无需重新刷新整个页面；</li>
</ul>
<blockquote>
<p>HMR 通过如下几种方式，来提高开发的速度：</p>
</blockquote>
<ul>
<li>不重新加载整个页面，这样可以保留某些应用程序的状态不丢失；</li>
<li>只更新需要变化的内容，节省开发的时间；</li>
<li>修改了 css、js 源代码，会立即在浏览器更新，相当于直接在浏览器的 devtools 中直接修改样式；</li>
</ul>
<blockquote>
<p>如何使用 HMR 呢？</p>
</blockquote>
<p>默认情况下，webpack-dev-server 已经支持 HMR，我们只需要开启即可；</p>
<p>在不开启 HMR 的情况下，当我们修改了源代码之后，整个页面会自动刷新，使用的是 live reloading；</p>
<h3 id="开启-HMR"><a href="#开启-HMR" class="headerlink" title="开启 HMR"></a>开启 HMR</h3><p>修改 webpack 的配置：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251541652.png" alt="image-20210925154140930"></p>
<p>浏览器可以看到如下效果：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251541606.png" alt="image-20210925154151957"></p>
<p>但是你会发现，当我们修改了某一个模块的代码时，依然是刷新的整个页面：</p>
<p>这是因为我们需要去指定哪些模块发生更新时，进行 HMR；</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251542498.png" alt="image-20210925154207841"></p>
<p><strong>框架的 HMR</strong></p>
<blockquote>
<p>有一个问题：在开发其他项目时，我们是否需要经常手动去写入 module.hot.accpet 相关的 API 呢？</p>
<p>比如开发 Vue、React 项目，我们修改了组件，希望进行热更新，这个时候应该如何去操作呢？</p>
</blockquote>
<p>事实上社区已经针对这些有很成熟的解决方案了：</p>
<p>比如 vue 开发中，我们使用<code>vue-loader</code>，此 loader 支持<code>vue组件的HMR</code>，提供开箱即用的体验；</p>
<p>比如 react 开发中，有<code>React Hot Loader</code>，<code>实时调整react组件</code>（目前 React 官方已经弃用了，改成使用<code>react-refresh</code>）；</p>
<p>接下来我们来演示一下 Vue 实现一下 HMR 功能。</p>
<h3 id="HMR-的原理"><a href="#HMR-的原理" class="headerlink" title="HMR 的原理"></a>HMR 的原理</h3><blockquote>
<p>那么 HMR 的原理是什么呢？如何可以做到只更新一个模块中的内容呢？</p>
</blockquote>
<ul>
<li>webpack-dev-server 会创建两个服务：提供静态资源的服务（express）和 Socket 服务（net.Socket）；</li>
<li>express server 负责直接提供静态资源的服务（打包后的资源直接被浏览器请求和解析）；</li>
</ul>
<blockquote>
<p>HMR Socket Server，是一个 socket 的长连接：</p>
</blockquote>
<ul>
<li>长连接有一个最好的好处是建立连接后双方可以通信（服务器可以直接发送文件到客户端）；</li>
<li>当服务器监听到对应的模块发生变化时，会生成两个文件.json（manifest 文件）和.js 文件（update chunk）；</li>
<li>通过长连接，可以直接将这两个文件主动发送给客户端（浏览器）；</li>
<li>浏览器拿到两个新的文件后，通过 HMR runtime 机制，加载这两个文件，并且针对修改的模块进行更新；</li>
</ul>
<h3 id="HMR-的原理图"><a href="#HMR-的原理图" class="headerlink" title="HMR 的原理图"></a>HMR 的原理图</h3><p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251545894.png" alt="image-20210925154514772"></p>
<h3 id="hotOnly、host-配置"><a href="#hotOnly、host-配置" class="headerlink" title="hotOnly、host 配置"></a>hotOnly、host 配置</h3><blockquote>
<p>host 设置主机地址：</p>
</blockquote>
<ul>
<li>默认值是 localhost；</li>
<li>如果希望其他地方也可以访问，可以设置为 0.0.0.0；</li>
</ul>
<blockquote>
<p>localhost 和 0.0.0.0 的区别：</p>
</blockquote>
<p>localhost：本质上是一个域名，通常情况下会被解析成 127.0.0.1;</p>
<p>127.0.0.1：回环地址(Loop Back Address)，表达的意思其实是我们主机自己发出去的包，直接被自己接收;</p>
<ul>
<li>正常的数据库包经常 应用层 - 传输层 - 网络层 - 数据链路层 - 物理层 ;</li>
<li>而回环地址，是在网络层直接就被获取到了，是不会经常数据链路层和物理层的;</li>
<li>比如我们监听 127.0.0.1 时，在同一个网段下的主机中，通过 ip 地址是不能访问的;</li>
</ul>
<blockquote>
<p>0.0.0.0：监听 IPV4 上所有的地址，再根据端口找到不同的应用程序;</p>
</blockquote>
<p>比如我们监听 0.0.0.0 时，在同一个网段下的主机中，通过 ip 地址是可以访问的;</p>
<h3 id="port、open、compress"><a href="#port、open、compress" class="headerlink" title="port、open、compress"></a>port、open、compress</h3><p>port 设置监听的端口，默认情况下是 8080</p>
<p>open 是否打开浏览器：</p>
<ul>
<li>默认值是 false，设置为 true 会打开浏览器；</li>
<li>也可以设置为类似于 Google Chrome 等值；</li>
</ul>
<p>compress 是否为静态文件开启 gzip compression：</p>
<ul>
<li>默认值是 false，可以设置为 true；<br><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251547317.png" alt="image-20210925154719468"></li>
</ul>
<h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><blockquote>
<p>proxy 是我们开发中非常常用的一个配置选项，它的目的设置代理来解决跨域访问的问题：</p>
</blockquote>
<p>比如我们的一个 api 请求是 <a href="http://localhost:8888，但是本地启动服务器的域名是" rel="external nofollow noreferrer">http://localhost:8888，但是本地启动服务器的域名是</a> <a href="http://localhost:8000，这个时候发送网络请求就会出现跨域的问题；" rel="external nofollow noreferrer">http://localhost:8000，这个时候发送网络请求就会出现跨域的问题；</a></p>
<p>那么我们可以将请求先发送到一个代理服务器，代理服务器和 API 服务器没有跨域的问题，就可以解决我们的跨域问题了；</p>
<blockquote>
<p>我们可以进行如下的设置：</p>
</blockquote>
<p><code>target</code>：表示的是代理到的目标地址，比如 /api-an/moment 会被代理到 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:8888/api-an/moment%EF%BC%9B">http://localhost:8888/api-an/moment；</a></p>
<p><code>pathRewrite</code>：默认情况下，我们的 /api-hy 也会被写入到 URL 中，如果希望删除，可以使用 pathRewrite；</p>
<p><code>secure</code>：默认情况下不接收转发到 https 的服务器上，如果希望支持，可以设置为 false；</p>
<p><code>changeOrigin</code>：它表示是否更新代理后请求的 headers 中 host 地址；</p>
<h3 id="changeOrigin-的解析"><a href="#changeOrigin-的解析" class="headerlink" title="changeOrigin 的解析"></a>changeOrigin 的解析</h3><blockquote>
<p>这个 changeOrigin 官方说的非常模糊，通过查看源码我发现其实是要修改代理请求中的 headers 中的 host 属性：</p>
</blockquote>
<p>因为我们真实的请求，其实是需要通过 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:8888/">http://localhost:8888</a> 来请求的；</p>
<p>但是因为使用了代码，默认情况下它的值时 <a href="http://localhost:8000；" rel="external nofollow noreferrer">http://localhost:8000；</a></p>
<p>如果我们需要修改，那么可以将 changeOrigin 设置为 true 即可；</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251549909.png" alt="image-20210925154952410"></p>
<h3 id="historyApiFallback"><a href="#historyApiFallback" class="headerlink" title="historyApiFallback"></a>historyApiFallback</h3><blockquote>
<p>historyApiFallback 是开发中一个非常常见的属性，它主要的作用是解决 SPA 页面在路由跳转之后，进行页面刷新时，返回 404 的错误。</p>
</blockquote>
<p>boolean 值：默认是 false</p>
<ul>
<li>如果设置为 true，那么在刷新时，返回 404 错误时，会自动返回 index.html 的内容；</li>
</ul>
<p>object 类型的值，可以配置 rewrites 属性：</p>
<ul>
<li>可以配置 from 来匹配路径，决定要跳转到哪一个页面；</li>
</ul>
<p>事实上 devServer 中实现 historyApiFallback 功能是通过 connect-history-api-fallback 库的：</p>
<p>可以查看 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/bripkens/connect-history-api-fallback">connect-history-api-fallback</a>文档</p>
<h3 id="resolve-模块解析"><a href="#resolve-模块解析" class="headerlink" title="resolve 模块解析"></a>resolve 模块解析</h3><p>resolve 用于设置模块如何被解析：</p>
<ul>
<li>在开发中我们会有各种各样的模块依赖，这些模块可能来自于自己编写的代码，也可能来自第三方库；</li>
<li>resolve 可以帮助 webpack 从每个 require/import 语句中，找到需要引入到合适的模块代码；</li>
<li>webpack 使用 enhanced-resolve 来解析文件路径；</li>
</ul>
<p><strong>webpack 能解析三种文件路径：</strong></p>
<ol>
<li>绝对路径<br>由于已经获得文件的绝对路径，因此不需要再做进一步解析。</li>
<li>相对路径<br>在这种情况下，使用 import 或 require 的资源文件所处的目录，被认为是上下文目录；<br>在 import/require 中给定的相对路径，会拼接此上下文路径，来生成模块的绝对路径；</li>
<li>模块路径<ul>
<li>在 resolve.modules 中指定的所有目录检索模块；<br>默认值是 [‘node_modules’]，所以默认会从 node_modules 中查找文件；</li>
<li>我们可以通过设置别名的方式来替换初识模块路径，具体后面讲解 alias 的配置；</li>
</ul>
</li>
</ol>
<h3 id="文件还是文件夹"><a href="#文件还是文件夹" class="headerlink" title="文件还是文件夹"></a>文件还是文件夹</h3><blockquote>
<p>如果是一个文件：</p>
</blockquote>
<p>如果文件具有扩展名，则直接打包文件；</p>
<p>否则，将使用 resolve.extensions 选项作为文件扩展名解析；</p>
<blockquote>
<p>如果是一个文件夹：</p>
</blockquote>
<p>会在文件夹中根据 resolve.mainFiles 配置选项中指定的文件顺序查找；</p>
<p>resolve.mainFiles 的默认值是 [‘index’]；</p>
<p>再根据 resolve.extensions 来解析扩展名；</p>
<h3 id="extensions-和-alias-配置"><a href="#extensions-和-alias-配置" class="headerlink" title="extensions 和 alias 配置"></a>extensions 和 alias 配置</h3><blockquote>
<p>extensions 是解析到文件时自动添加扩展名：</p>
</blockquote>
<p>默认值是 [‘.wasm’, ‘.mjs’, ‘.js’, ‘.json’]；</p>
<p>所以如果我们代码中想要添加加载 .vue 或者 jsx 或者 ts 等文件时，我们必须自己写上扩展名；</p>
<blockquote>
<p>另一个非常好用的功能是配置别名 alias：</p>
</blockquote>
<p>特别是当我们项目的目录结构比较深的时候，或者一个文件的路径可能需要 ../../../这种路径片段；</p>
<p>我们可以给某些常见的路径起一个别名;</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251556509.png" alt="image-20210925155657501"></p>
<h3 id="如何区分开发环境"><a href="#如何区分开发环境" class="headerlink" title="如何区分开发环境"></a>如何区分开发环境</h3><blockquote>
<p>目前我们所有的 webpack 配置信息都是放到一个配置文件中的：webpack.config.js</p>
</blockquote>
<ul>
<li>当配置越来越多时，这个文件会变得越来越不容易维护；</li>
<li>并且某些配置是在开发环境需要使用的，某些配置是在生成环境需要使用的，当然某些配置是在开发和生成环境都会使用的；</li>
<li>所以，我们最好对配置进行划分，方便我们维护和管理；</li>
</ul>
<blockquote>
<p>那么，在启动时如何可以区分不同的配置呢？</p>
</blockquote>
<p>方案一：编写两个不同的配置文件，开发和生成时，分别加载不同的配置文件即可；</p>
<p>方式二：使用相同的一个入口配置文件，通过设置参数来区分它们；</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251608778.png" alt="image-20210925160836872"></p>
<h3 id="入口文件解析"><a href="#入口文件解析" class="headerlink" title="入口文件解析"></a>入口文件解析</h3><blockquote>
<p>我们之前编写入口文件的规则是这样的：./src/index.js，但是如果我们的配置文件所在的位置变成了 config 目录，我们是否应该变成 ../src/index.js 呢？</p>
</blockquote>
<p>如果我们这样编写，会发现是报错的，依然要写成 ./src/index.js；</p>
<p>这是因为入口文件其实是和另一个属性时有关的 context；</p>
<p>context 的作用是用于解析入口（entry point）和加载器（loader）：</p>
<ul>
<li>官方说法：默认是当前路径（但是经过我测试，默认应该是 webpack 的启动目录）</li>
<li>另外推荐在配置中传入一个值；</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251609381.png" alt="image-20210925160958707"></p>
<h3 id="Vue-CLI-脚手架"><a href="#Vue-CLI-脚手架" class="headerlink" title="Vue CLI 脚手架"></a>Vue CLI 脚手架</h3><p>什么是 Vue 脚手架？</p>
<ul>
<li>我们前面学习了如何通过 webpack 配置 Vue 的开发环境，但是在真实开发中我们不可能每一个项目从头来完成</li>
<li>所有的 webpack 配置，这样显示开发的效率会大大的降低；</li>
<li>所以在真实开发中，我们通常会使用脚手架来创建一个项目，Vue 的项目我们使用的就是 Vue 的脚手架；</li>
<li>脚手架其实是建筑工程中的一个概念，在我们软件工程中也会将一些帮助我们搭建项目的工具称之为脚手架；</li>
</ul>
<p>Vue 的脚手架就是 Vue CLI：</p>
<ul>
<li>CLI 是 Command-Line Interface, 翻译为命令行界面；</li>
<li>我们可以通过 CLI 选择项目的配置和创建出我们的项目；</li>
<li>Vue CLI 已经内置了 webpack 相关的配置，我们不需要从零来配置；</li>
</ul>
<h3 id="Vue-CLI-安装和使用"><a href="#Vue-CLI-安装和使用" class="headerlink" title="Vue CLI 安装和使用"></a>Vue CLI 安装和使用</h3><blockquote>
<p>安装 Vue CLI（目前最新的版本是 v4.5.13）</p>
</blockquote>
<p>我们是进行全局安装，这样在任何时候都可以通过 vue 的命令来创建项目；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vue/cli -g</span><br></pre></td></tr></table></figure>

<p>升级 Vue CLI：如果是比较旧的版本，可以通过下面的命令来升级</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update @vue/cli -g</span><br></pre></td></tr></table></figure>

<p>通过 Vue 的命令来创建项目</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue create 项目的名称</span><br></pre></td></tr></table></figure>

<h3 id="vue-create-项目的过程"><a href="#vue-create-项目的过程" class="headerlink" title="vue create 项目的过程"></a>vue create 项目的过程</h3><p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251613546.png" alt="image-20210925161303053"></p>
<h3 id="项目的目录结构"><a href="#项目的目录结构" class="headerlink" title="项目的目录结构"></a>项目的目录结构</h3><p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251613706.png" alt="image-20210925161321540"></p>
<h3 id="Vue-CLI-的运行原理"><a href="#Vue-CLI-的运行原理" class="headerlink" title="Vue CLI 的运行原理"></a>Vue CLI 的运行原理</h3><p><img src= "/img/loading.gif" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251558149.png" alt="image-20210925155806633"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:2268025923@qq.com" rel="external nofollow noreferrer">Violet</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://qwq3.top/posts/8f22.html">https://qwq3.top/posts/8f22.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://qwq3.top" target="_blank">Violet`Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue3/">Vue3</a></div><div class="post_share"><div class="social-share" data-image="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251519896.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></p></article></div></main></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/5a8c.html"><img class="prev-cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109281026746.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">webpack 使用汇总</div></div></a></div><div class="next-post pull-right"><a href="/posts/eb7d.html"><img class="next-cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251557342.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vite基础</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i> <span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/e4a0.html" title="Vue3的变化"><img class="cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251034363.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-26</div><div class="title">Vue3的变化</div></div></a></div><div><a href="/posts/1e4.html" title="v-for 中的 key 是什么作用"><img class="cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251402445.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-27</div><div class="title">v-for 中的 key 是什么作用</div></div></a></div><div><a href="/posts/eb7d.html" title="Vite基础"><img class="cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251557342.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-01</div><div class="title">Vite基础</div></div></a></div><div><a href="/posts/d64d.html" title="Vue3动画"><img class="cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202110060942033.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-05</div><div class="title">Vue3动画</div></div></a></div><div><a href="/posts/24d6.html" title="Vue3 源码解析"><img class="cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202110060943629.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-15</div><div class="title">Vue3 源码解析</div></div></a></div><div><a href="/posts/5a8c.html" title="webpack 使用汇总"><img class="cover" data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109281026746.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-28</div><div class="title">webpack 使用汇总</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Waline</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div id="waline-wrap"></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/waterchen520/cdn@5.0/qiqi/img/23.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-info__name">Violet</div><div class="author-info__description">生活明朗,万物可爱💖</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/WaterChen520"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/WaterChen520" rel="external nofollow noreferrer" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=2268025923@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/372204786" rel="external nofollow noreferrer" target="_blank" title="BiliBili"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=2268025923&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" rel="external nofollow noreferrer" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ1"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-babel%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">为什么需要 babel？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">Babel 命令行使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">插件的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel-%E7%9A%84%E9%A2%84%E8%AE%BE-preset"><span class="toc-number">4.</span> <span class="toc-text">Babel 的预设 preset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel-%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">Babel 的底层原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel-%E7%BC%96%E8%AF%91%E5%99%A8%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">Babel 编译器执行原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#babel-loader"><span class="toc-number">7.</span> <span class="toc-text">babel-loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#babel-preset"><span class="toc-number">8.</span> <span class="toc-text">babel-preset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Babel-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">9.</span> <span class="toc-text">Babel 的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-%E6%BA%90%E7%A0%81%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-number">10.</span> <span class="toc-text">Vue 源码的打包</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/24d6.html" title="Vue3 源码解析"><img data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202110060943629.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Vue3 源码解析"></a><div class="content"><a class="title" href="/posts/24d6.html" title="Vue3 源码解析">Vue3 源码解析</a><time datetime="2021-10-15T18:10:12.000Z" title="发表于 2021-10-15 18:10:12">2021-10-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3d9.html" title="Vue3 Composition API"><img data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202110060943559.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Vue3 Composition API"></a><div class="content"><a class="title" href="/posts/3d9.html" title="Vue3 Composition API">Vue3 Composition API</a><time datetime="2021-10-09T11:10:12.000Z" title="发表于 2021-10-09 11:10:12">2021-10-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d64d.html" title="Vue3动画"><img data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202110060942033.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Vue3动画"></a><div class="content"><a class="title" href="/posts/d64d.html" title="Vue3动画">Vue3动画</a><time datetime="2021-10-05T14:11:32.000Z" title="发表于 2021-10-05 14:11:32">2021-10-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bee4.html" title="Vue3组件化开发"><img data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202110070901649.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Vue3组件化开发"></a><div class="content"><a class="title" href="/posts/bee4.html" title="Vue3组件化开发">Vue3组件化开发</a><time datetime="2021-10-02T17:14:32.000Z" title="发表于 2021-10-02 17:14:32">2021-10-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/eb7d.html" title="Vite基础"><img data-lazy-src="https://picgo-1302391568.cos.ap-chengdu.myqcloud.com/img/202109251557342.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Vite基础"></a><div class="content"><a class="title" href="/posts/eb7d.html" title="Vite基础">Vite基础</a><time datetime="2021-10-01T10:15:32.000Z" title="发表于 2021-10-01 10:15:32">2021-10-01</time></div></div></div></div></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Violet</div><div class="footer_custom_text"><div style="font-size:12px"><span id="timeDate"></span><span id="times"></span><i class="fas fa-heartbeat" style="color:red"></i><br>生活明朗，万物可爱. <img src="https://cdn.jsdelivr.net/gh/waterchen520/cdn@5.0/qiqi/img/beian.jpg" style="margin-bottom:-3px"> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/#/Integrated/index" style="text-decoration:none">湘ICP备2021008511号-1</a><br><div class="github-badge"><a href="https://hexo.io/" rel="external nofollow noreferrer" target="_blank" title="由 Hexo 强力驱动" style="color:#fff"><span class="badge-subject">Powered</span><span class="badge-value bg-blue">Hexo</span></a> <a style="color:#fff" href="https://github.com/" rel="external nofollow noreferrer" target="_blank" title="静态网页托管于 Github"><span class="badge-subject">Hosted</span><span class="badge-value bg-brightgreen">Github</span></a> <a style="color:#fff" href="https://www.jsdelivr.com/" rel="external nofollow noreferrer" target="_blank" title="jsDelivr 提供 CDN 加速服务"><span class="badge-subject">CDN</span><span class="badge-value bg-orange">jsDelivr</span></a> <a style="color:#fff" href="https://github.com/jerryc127/hexo-theme-butterfly" rel="external nofollow noreferrer" target="_blank" title="站点使用 Butterfly 3.7.1版本 主题"><span class="badge-subject">Theme</span><span class="badge-value bg-blue">Butterfly 3.7.1</span></a><a style="color:#fff" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可"><div class="badge-subject"><i class="fa fa-copyright"></i></div><div class="badge-value bg-lightgrey">BY-NC-SA 4.0</div></a></div></div></div></div></footer><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入关键词进行查找" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script async>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout((function(){preloader.endLoading()}),5e3)</script></div><div class="js-pjax"><script>var gitcalendar=new Vue({el:"#gitcalendar",data:{simplemode:!1,user:"WaterChen520",fixed:"fixed",px:"px",x:"",y:"",span1:"",span2:"",month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthchange:[],oneyearbeforeday:"",thisday:"",amonthago:"",aweekago:"",weekdatacore:0,datacore:0,total:0,datadate:"",data:[],positionplusdata:[],firstweek:[],lastweek:[],beforeweek:[],thisweekdatacore:0,mounthbeforeday:0,mounthfirstindex:0,crispedges:"crispedges",thisdayindex:0,amonthagoindex:0,amonthagoweek:[],firstdate:[],first2date:[],montharrbefore:[],monthindex:0,color:["#ebedf0","#fdcdec","#fc9bd9","#fa6ac5","#f838b2","#f5089f","#c4067e","#92055e","#540336","#48022f","#30021f"]},methods:{selectStyle(e,t){document.querySelector(".angle-wrapper").style.display="block",this.span1=e.date,this.span2=e.count,this.x=t.clientX-100,this.y=t.clientY-60},outStyle(){document.querySelector(".angle-wrapper").style.display="none"},thiscolor(e){if(0===e){parseInt(e/2);return this.color[0]}if(e<2)return this.color[1];if(e<20){let t=parseInt(e/2);return this.color[t]}return this.color[9]}}}),apiurl="https://python-github-calendar-api-bay.vercel.app/api?",githubapiurl=apiurl+gitcalendar.user;function responsiveChart(){let e=document.getElementById("gitcanvas");if(e){let t=document.getElementById("gitmessage"),a=e.getContext("2d");e.width=document.getElementById("gitcalendarcanvasbox").offsetWidth;let n=.96*e.width/gitcalendar.data.length;e.height=9*n;let i=.8*n,d={x:.02*e.width,y:.025*e.width};for(let t in gitcalendar.data){weekdata=gitcalendar.data[t];for(let e in weekdata){let t={date:"",count:"",x:0,y:0};gitcalendar.positionplusdata.push(t),a.fillStyle=gitcalendar.thiscolor(weekdata[e].count),d.y=Math.round(100*d.y)/100,t.date=weekdata[e].date,t.count=weekdata[e].count,t.x=d.x,t.y=d.y,a.fillRect(d.x,d.y,i,i),d.y=d.y+n}d.y=.025*e.width,d.x=d.x+n}a.font="600  Arial",a.fillStyle="#aaa",a.fillText("日",0,1.9*n),a.fillText("二",0,3.9*n),a.fillText("四",0,5.9*n),a.fillText("六",0,7.9*n);let r=e.width/24;for(let t in gitcalendar.monthchange)a.fillText(gitcalendar.monthchange[t],r,.7*n),r+=e.width/12;t.onmousemove=function(e){document.querySelector(".angle-wrapper").style.display="none"},e.onmousemove=function(t){document.querySelector(".angle-wrapper").style.display="none",function(e,t){var a=e.getBoundingClientRect(),n=t.clientX-a.left*(e.width/a.width),d=t.clientY-a.top*(e.height/a.height);for(let e of gitcalendar.positionplusdata){let a=n-e.x,r=d-e.y;0<a&&a<i&&0<r&&r<i&&(document.querySelector(".angle-wrapper").style.display="block",gitcalendar.span1=e.date,gitcalendar.span2=e.count,gitcalendar.x=t.clientX-100,gitcalendar.y=t.clientY-60)}}(e,t)}}}function addlastmonth(){0===gitcalendar.thisdayindex?(thisweekcore(52),thisweekcore(51),thisweekcore(50),thisweekcore(49),thisweekcore(48),gitcalendar.thisweekdatacore+=gitcalendar.firstdate[6].count,gitcalendar.amonthago=gitcalendar.firstdate[6].date):(thisweekcore(52),thisweekcore(51),thisweekcore(50),thisweekcore(49),thisweek2core(),gitcalendar.amonthago=gitcalendar.first2date[gitcalendar.thisdayindex-1].date)}function thisweek2core(){for(let e=gitcalendar.thisdayindex-1;e<gitcalendar.first2date.length;e++)gitcalendar.thisweekdatacore+=gitcalendar.first2date[e].count}function thisweekcore(e){for(let t of gitcalendar.data[e])gitcalendar.thisweekdatacore+=t.count}function addlastweek(){for(let e of gitcalendar.lastweek)gitcalendar.weekdatacore+=e.count}function addbeforeweek(){for(let e=gitcalendar.thisdayindex;e<gitcalendar.beforeweek.length;e++)gitcalendar.weekdatacore+=gitcalendar.beforeweek[e].count}function addweek(e){6===gitcalendar.thisdayindex?(gitcalendar.aweekago=gitcalendar.lastweek[0].date,addlastweek()):(lastweek=e.contributions[51],gitcalendar.aweekago=lastweek[gitcalendar.thisdayindex+1].date,addlastweek(),addbeforeweek())}fetch(githubapiurl).then(e=>e.json()).then(e=>{gitcalendar.data=e.contributions,gitcalendar.total=e.total,gitcalendar.first2date=gitcalendar.data[48],gitcalendar.firstdate=gitcalendar.data[47],gitcalendar.firstweek=e.contributions[0],gitcalendar.lastweek=e.contributions[52],gitcalendar.beforeweek=e.contributions[51],gitcalendar.thisdayindex=gitcalendar.lastweek.length-1,gitcalendar.thisday=gitcalendar.lastweek[gitcalendar.thisdayindex].date,gitcalendar.oneyearbeforeday=gitcalendar.firstweek[0].date,gitcalendar.monthindex=1*gitcalendar.thisday.substring(5,7),gitcalendar.montharrbefore=gitcalendar.month.splice(gitcalendar.monthindex,12-gitcalendar.monthindex),gitcalendar.monthchange=gitcalendar.montharrbefore.concat(gitcalendar.month),addweek(e),addlastmonth(),responsiveChart()}).catch((function(e){console.log(e)})),window.onresize=function(){gitcalendar.simplemode&&responsiveChart()},window.onscroll=function(){document.querySelector(".angle-wrapper")&&(document.querySelector(".angle-wrapper").style.display="none")}</script><script>(()=>{const t=document.getElementById("twikoo-count"),o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"blogcomment-9gwtd96d01685149",region:""},null))},n=()=>{twikoo.getCommentsCount({envId:"blogcomment-9gwtd96d01685149",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(o){t.innerText=o[0].count})).catch((function(t){console.error(t)}))},e=(e=!1)=>{"object"==typeof twikoo?(o(),e&&t&&setTimeout(n,0)):getScript("https://cdn.jsdelivr.net/npm/twikoo@1.3.0/dist/twikoo.all.min.js").then(()=>{o(),e&&t&&setTimeout(n,0)})};e(!0)})()</script><script>function loadWaline(){function e(){new Waline(Object.assign({el:"#waline-wrap",serverURL:"https://waline-api-ebon.vercel.app/",avatar:"mp",path:location.pathname,emojiCDN:"//i0.hdslb.com/bfs/emote/",emojiMaps:"",visitor:!1},[{placeholder:"今天应该会收到少佐的信叭~<br>生活明朗，万物可爱"}]))}"function"==typeof Waline?e():getScript("https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js").then(e)}{function loadOtherComment(){loadWaline()}setTimeout(loadWaline,0)}</script></div><script data-pjax src="https://cdn.jsdelivr.net/gh/waterchen520/cdn@5.0/qiqi/js/qiqi.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/time.js"></script><script async src="//at.alicdn.com/t/font_2508400_xe8j12uijki.js"></script><script async data-pjax src="/js/floatpanel.js"></script><script defer src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script async src="//at.alicdn.com/t/font_2264842_3izu8i5eoc2.js"></script><div class="aplayer no-destroy" data-id="7794756738" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="order" data-preload="metadata" data-autoplay="false" data-mutex="true" muted></div><script async src="/js/custom.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="//code.tidio.co/lpcfvqfq39w0zjxvzzrchgwldmpvavcc.js" async></script><script>function onTidioChatApiReady(){window.tidioChatApi.hide(),window.tidioChatApi.on("close",(function(){window.tidioChatApi.hide()}))}window.tidioChatApi?window.tidioChatApi.on("ready",onTidioChatApiReady):document.addEventListener("tidioChat-ready",onTidioChatApiReady);var chatBtnFn=()=>{document.getElementById("chat_btn").addEventListener("click",(function(){window.tidioChatApi.show(),window.tidioChatApi.open()}))};chatBtnFn()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/gh/waterchen520/cdn2@2.0/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/waterchen520/cdn2@2.0/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax], .pjax-reload script").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:send",(function(){if("object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="pjax-reload"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("article-sort-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__slideInRight"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer src="https://cdn.jsdelivr.net/gh/waterchen520/cdn2@master/wow_init.js"></script><div class="app-refresh" id="app-refresh" style="position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease"><div class="app-refresh-wrap" style="display:flex;color:#fff;height:100%;align-items:center;justify-content:center"><label>✨ 有新文章啦！ 👉</label><a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()"><span style="color:#fff;text-decoration:underline;cursor:pointer">🍗点击食用🍔</span></a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"✨ 有新文章啦！ 👉",backgroundColor:t,duration:5e5,pos:e,actionText:"🍗点击食用🍔",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>